<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <title>Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù€ Session</title>
  <style>
    body{font-family:Arial;background:#111;color:#fff;text-align:center;padding:50px}
    .box{background:#222;padding:40px;border-radius:12px;max-width:500px;margin:auto}
    input[type="file"]{margin:20px 0;font-size:16px}
    button{background:#e1306c;color:#fff;padding:14px 28px;border:none;border-radius:6px;font-size:18px;cursor:pointer}
    button:hover{background:#c7225a}
    #result{margin-top:20px;font-size:16px}
  </style>
</head>
<body>
  <div class="box">
    <h1>Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù€ Session</h1>
    <p>Ø§Ø®ØªØ± Ù…Ù„Ù Ø§Ù„Ù€ Session JSON Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:</p>
    <form id="uploadForm">
      <input type="file" id="sessionFile" accept=".json" required/>
      <br/><br/>
      <button type="submit">ğŸ“¤ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù</button>
    </form>
    <div id="result"></div>
    <br/>
    <a href="/" style="color:#e1306c">â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Dashboard</a>
  </div>

  <script>
    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const file = document.getElementById('sessionFile').files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = async (event) => {
        try {
          const sessionData = JSON.parse(event.target.result);

          const response = await fetch('/api/trpc/session.import', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ sessionData }),
          });

          const result = await response.json();
          document.getElementById('result').innerHTML = 
            result.success ? 
            '<span style="color:#0f0">âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù€ session Ø¨Ù†Ø¬Ø§Ø­!</span>' : 
            `<span style="color:#f00">âŒ Ø®Ø·Ø£: ${result.message}</span>`;

        } catch (e) {
          document.getElementById('result').innerHTML = '<span style="color:#f00">âŒ Ù…Ù„Ù JSON ØºÙŠØ± ØµØ§Ù„Ø­</span>';
        }
      };
      reader.readAsText(file);
    });
  </script>
</body>
</html>
